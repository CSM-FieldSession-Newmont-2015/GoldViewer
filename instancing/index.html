<html>
	<head>
		<title>Instancing Test</title>
		<script type="text/javascript" src="three.js"></script>
		<script type="text/javascript" src="OrbitControls.js"></script>
		<script type="text/javascript" src="stats.min.js"></script>
		<script type="text/javascript" src="main.js"></script>

		<script id="renderVertexShader" type="x-shader/x-vertex">
precision highp float;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform vec4 color;
uniform float time;

attribute vec3 position;
attribute vec3 offset;
attribute vec3 scale;

varying vec4 vColor;
varying vec3 vPosition;
varying float vTime;

// Shader for @@name@@.
void main() {
	vColor = color;
	vPosition = offset;
	vTime = time;

	vec3 newPosition = position;
	/* TODO: Rotate here. */
	newPosition = offset + scale * newPosition;
	gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
}
		</script>

		<script id="renderFragmentShader" type="x-shader/x-fragment">
precision highp float;

varying vec4 vColor;
varying vec3 vPosition;
varying float vTime;

// Shader for @@name@@.
void main() {
	gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
	if (vPosition.z < 100.0 * sin(vTime) + 100.0) {
		//gl_FragColor.a -= 0.5;
	}
}
		</script>

		<script id="hoverVertexShader" type="x-shader/x-vertex">
precision highp float;

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float time;

attribute vec3 position;
attribute vec3 offset;
attribute vec3 scale;
attribute vec3 color;

varying vec4 vColor;

// Shader for @@name@@.
void main() {
	vColor = vec4(color, 1.0);

	vec3 newPosition = position;
	/* TODO: Rotate here. */
	newPosition = offset + scale * newPosition;
	gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
}
		</script>

		<script id="hoverFragmentShader" type="x-shader/x-fragment">
precision highp float;

varying vec4 vColor;

// Shader for @@name@@.
void main() {
	gl_FragColor = vColor;
}
		</script>

		<style>
			* {
				margin: 0;
				padding: 0;
			}
			html, body {
				width: 100%;
				height:100%;
			}
			canvas {
				display:block;
				height: 100vh;
				width: 100vw;
			}
		</style>
	</head>


	<body onload="start()">
		<canvas id="canvas">
			Oops.
		</canvas>
	</body>
</html
