<!doctype html>
<html lang="en">
	<head>
        <meta charset="utf-8" />
		<title>Newmont WebGL Demo</title>

        <!-- External libraries are hosted under /js. -->
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/sunny/jquery-ui.css">
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

        <style>
			html, body { height: 100%; width: 100%; margin: 0; }
			canvas { width: 100%; height: 100% }
            #divCommandBar > ul > li {
                float: left;
                left:0px;
                top:0px;
                background-color:white;
            }
            #ControlBar {
                padding: 4px;
                display: inline-block;
                position: absolute;
                left:0px;
                bottom:0px;
            }
            /* support: IE7 */
            *+html #ControlBar {
                display: inline;
            }
        </style>
	</head>
	<body>

		<div id="divCommandBar"></div>
        <iframe id="viewFrame" src="ViewFrame.html"
                allowfullscreen webkitallowfullscreen mozallowfullscreen
                style="height: 100%; width: 100%; border: none">
        </iframe>
        <div id="ControlBar" class="ui-widget-header ui-corner-all"></div>
	</body>
</html>

<script>
    $(document).ready(function() {
        $.get("CommandBar.html", function (data) {
            $("#divCommandBar").append(data);
            $("ul#CommandBar").menu();
        });
        $.get("ControlBar.html", function (data) {
            $("div#ControlBar").append(data);
            $("#zoomIn").button({
                text: false,
                icons: {
                    primary: "ui-icon-zoomin"
                }
            });
            $( "#zoomIn" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.dollyIn(1.25);
			});
            $("#zoomOut").button({
                text: false,
                icons: {
                    primary: "ui-icon-zoomout"
                }
            });
            $( "#zoomOut" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.dollyIn(.75);
			});
            $("#panLeft").button({
                text: false,
                icons: {
                    primary: "ui-icon-arrow-1-w"
                }
            });
            $( "#panLeft" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.panLeft(1);
			});

            /*            .click(function () {
                            var options;
                            if ($(this).text() === "play") {
                                options = {
                                    label: "pause",
                                    icons: {
                                        primary: "ui-icon-pause"
                                    }
                                };
                            } else {
                                options = {
                                    label: "play",
                                    icons: {
                                        primary: "ui-icon-play"
                                    }
                                };
                            }
                            $(this).button("option", options);
                        });
                        $("#stop").button({
                            text: false,
                            icons: {
                                primary: "ui-icon-stop"
                            }
                        })
                        .click(function () {
                            $("#play").button("option", {
                                label: "play",
                                icons: {
                                    primary: "ui-icon-play"
                                }
                            });
                        });
                        */;
            $("#panRight").button({
                text: false,
                icons: {
                    primary: "ui-icon-arrow-1-e"
                }
            });
            $( "#panRight" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.panLeft(-1);
			});

            $("#panUp").button({
                text: false,
                icons: {
                    primary: "ui-icon-arrow-1-n"
                }
            });
            $( "#panUp" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.panUp(1);
			});
            $("#panDown").button({
                text: false,
                icons: {
                    primary: "ui-icon-arrow-1-s"
                }
            });
            $( "#panDown" ).click(function() {
			  document.getElementById('viewFrame').contentWindow.controls.panUp(-1);
			});


            $("#toggleButton").button();
            $("#radioDemo").buttonset();

            $(document).keydown(function(event) {
            	//prevent arrow key scrolling
            	if(event.keyCode>=38 && event.keyCode<=40)
            		event.preventDefault();
            	document.getElementById('viewFrame').contentWindow.controls.onKeyDown(event);
			});
        });

        $(window).resize(function() {
            var height = $(window).height();
            height -= $("#viewFrame").position().top;
            height -= $("div#ControlBar").outerHeight(true);
            height -= 8;
            $("#viewFrame").height(height);
        });

    });
</script>
